<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skill Forge Digital Profile Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- Skill Forge Global Styles --- */
        :root {
            --color-primary: #34D399; /* Emerald 400 */
            --color-secondary: #10B981; /* Emerald 500 */
            --color-bg: #0A0A0A; /* Very Dark Background */
        }
        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--color-bg);
            color: #E5E7EB;
            min-height: 100vh;
        }
        .text-gradient {
            background-image: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .glass-header {
            background-color: rgba(10, 10, 10, 0.5);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        /* --- Quiz Specific Styling --- */
        .question-text {
            font-size: 1.6em; /* Larger question text */
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 2rem;
            text-align: center;
        }
        .option-btn {
            display: block;
            width: 100%;
            background-color: #1a1a1a; /* Darker option background */
            border: 2px solid #333;
            color: white;
            font-weight: 500;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            border-radius: 12px;
            transition: all 0.2s ease-in-out;
            text-align: left;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            font-size: 1.1em;
        }
        .option-btn:hover {
            background-color: #222;
            border-color: var(--color-secondary);
            transform: translateY(-2px);
            box-shadow: 0 8px 10px rgba(52, 211, 153, 0.2);
        }
        .option-btn.selected {
            background-color: var(--color-primary);
            color: #000;
            border-color: #000;
            font-weight: bold;
            transform: scale(1.01);
            box-shadow: 0 0 15px rgba(52, 211, 153, 0.8);
        }
        #next-btn {
            display: block;
            width: 100%;
            text-align: center;
            letter-spacing: 1px;
        }
        .progress-bar-container {
            height: 8px;
            background-color: #333;
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--color-primary);
            transition: width 0.4s ease-in-out;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-950">

    <!-- Header -->
    <header class="glass-header shadow-2xl border-b border-green-700/50 sticky top-0 z-50 rounded-b-xl">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo with scaleIn animation -->
            <div class="text-3xl font-extrabold text-gradient tracking-widest">Skill Forge</div>

            <!-- Navigation Link (Updated to be a regular button as this is a standalone quiz page) -->
            <a href="{% url 'landing:index'%}"  class="bg-green-600 text-gray-900 px-4 py-2 rounded-lg font-semibold hover:bg-green-500 transition duration-200 shadow-lg hidden sm:block">
                Home
            </a>
        </nav>
    </header>

    <!-- Main Quiz Container -->
    <main class="max-w-3xl mx-auto px-4 py-16">
        <h1 class="text-4xl sm:text-5xl font-extrabold text-center text-green-400 mb-4">Unlock Your Learning Genome</h1>
        <p class="text-center text-gray-400 mb-12 text-lg">Take this streamlined quiz to discover your strengths, weaknesses, and personalized learning profile.</p>

        <div id="quiz-container" class="bg-[#111] p-8 rounded-3xl border border-green-700/50 shadow-2xl shadow-green-900/50 transition duration-500">
            <!-- Progress Bar -->
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>

            <div id="question-container">
                <!-- Questions injected here -->
            </div>
            <div class="text-center">
                <button id="next-btn" onclick="nextQuestion()" class="bg-green-600 text-gray-900 font-bold px-6 py-3 rounded-xl mt-6 hover:bg-green-500 transition duration-200 shadow-lg" style="display:none;">
                    Next Question
                </button>
            </div>
        </div>
    </main>

    <!-- Result Display -->
    <div id="result" class="max-w-3xl mx-auto px-4 py-16 bg-[#111] rounded-3xl border border-green-700/50 shadow-2xl shadow-green-900/50 mt-8 text-gray-100" style="display:none;">
        <!-- Results injected here -->
    </div>

<script>
// Quiz data (10 focused questions to cover all 7 criteria)
const questions = [
    // 1. Thinking Style & Strong/Weak Skills (Q1, Q2)
    { q: "1. When learning a complex topic, I prefer to:", options: ["Break it down logically (Analytical)", "Experiment and find my own way (Intuitive)", "Follow a step-by-step guide (Structured)"], key: "thinking_style" },
    { q: "2. Which academic subject or skill comes most naturally to you?", options: ["Math & Science (Logical)", "Art & Writing (Creative)", "Sports & Building (Practical)"], key: "strong_skill" },

    // 3. Perception (Q3)
    { q: "3. When learning a new skill, which method is most effective for you?", options: ["Watching videos or diagrams (Visual)", "Listening to explanations or lectures (Auditory)", "Immediately trying it out yourself (Kinesthetic)"], key: "perception" },

    // 4. Pace of Assimilation (Q4)
    { q: "4. When you encounter challenging material, you usually:", options: ["Master it quickly, even if it takes effort (Fast Assimilation)", "Take my time, reviewing it multiple times (Moderate Assimilation)", "Often get stuck and need outside help (Slow Assimilation)"], key: "pace" },

    // 5. Core Interests (Q5)
    { q: "5. Which type of extracurricular or hobby excites you most?", options: ["Coding, Robotics, or Strategy Games (Technology & Logic)", "Drawing, Music, or Theater (Arts & Expression)", "Volunteering, Debating, or Organizing events (Social & Business)"], key: "core_interest" },

    // 6. Emotional State & Task Behavior (Q6, Q7, Q8, Q9)
    { q: "6. How do you feel when your schedule suddenly changes and disrupts your plan?", options: ["Calmly adjust my approach (Stable Emotional State)", "Feel stressed or annoyed (Reactive Emotional State)", "Get overwhelmed and lose focus (Unstable Emotional State)"], key: "emotional_state" },
    { q: "7. When starting a major project, you are most likely to:", options: ["Define all steps and deadlines before starting (Organized Behavior)", "Start immediately, figuring it out as I go (Adaptive Behavior)", "Wait until the last minute to begin (Procrastination Behavior)"], key: "task_behavior_planning" },
    { q: "8. How do you handle failure or criticism?", options: ["Analyze it and try again immediately (Resilient)", "Get discouraged but eventually recover (Moderate Resilience)", "Avoid tasks where failure is possible (Risk-Averse)"], key: "task_behavior_resilience" },
    { q: "9. When working in a group, your primary contribution is:", options: ["Leading the discussion and assigning tasks (Leadership)", "Ensuring everyone feels heard and the work is high quality (Support/Detail)", "Completing a specific part independently (Specialist/Solo)"], key: "task_behavior_group" },

    // 7. Weak Skills (Q10)
    { q: "10. Which area do you find yourself needing the most help with?", options: ["Staying motivated on long projects (Endurance)", "Understanding emotional or social situations (Empathy/Soft Skills)", "Keeping track of small details and follow-through (Attention to Detail)"], key: "weak_skill" },

];

let currentQuestion = 0;
let answers = {};
let selectedOptionEl = null;

function updateProgressBar() {
    const progress = ((currentQuestion + 1) / questions.length) * 100;
    document.getElementById("progress-bar").style.width = `${progress}%`;
}

function showQuestion() {
    const container = document.getElementById("question-container");
    container.innerHTML = "";
    const q = questions[currentQuestion];

    const questionEl = document.createElement("div");
    questionEl.className = "question-text";
    questionEl.innerText = q.q;
    container.appendChild(questionEl);

    q.options.forEach(option => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.innerText = option;
        // Check if this option was previously selected and highlight it
        if (answers[q.key] === option) {
            btn.classList.add('selected');
            selectedOptionEl = btn;
        }
        btn.onclick = (e) => selectAnswer(option, e.target);
        container.appendChild(btn);
    });

    const nextBtn = document.getElementById("next-btn");
    nextBtn.style.display = answers[q.key] ? "inline-block" : "none";
    nextBtn.innerText = currentQuestion < questions.length - 1 ? "Next Question" : "View Profile";

    updateProgressBar();
}

function selectAnswer(option, element) {
    const key = questions[currentQuestion].key;
    answers[key] = option;

    // Visual selection logic
    const allOptions = document.querySelectorAll('.option-btn');
    allOptions.forEach(btn => btn.classList.remove('selected'));
    element.classList.add('selected');

    const nextBtn = document.getElementById("next-btn");
    nextBtn.style.display = "inline-block";
    nextBtn.innerText = currentQuestion < questions.length - 1 ? "Next Question" : "View Profile";
    selectedOptionEl = element;
}

function nextQuestion() {
    // Check if an answer has been selected for the current question
    if (answers[questions[currentQuestion].key]) {
        currentQuestion++;
        if (currentQuestion < questions.length) {
            showQuestion();
        } else {
            showResult();
        }
    } else {
        console.warn("Please select an answer before proceeding.");
    }
}

function showResult() {
    document.getElementById("quiz-container").style.display = "none";
    const res = document.getElementById("result");

    // --- Analysis for the 7 Criteria ---

    // 1. Thinking Style
    const thinkingStyle = answers.thinking_style.includes("Logical") ? "Analytical Thinker" : answers.thinking_style.includes("Intuitive") ? "Creative/Intuitive Thinker" : "Structured Thinker";

    // 2. Perception (Learning Style)
    const perception = answers.perception.split(' ')[0]; // Visual, Auditory, or Kinesthetic

    // 3. Pace of Assimilation
    const pace = answers.pace.includes("Fast") ? "Quick Adaptor" : answers.pace.includes("Moderate") ? "Methodical Learner" : "Support-Oriented Learner";

    // 4. Core Interests
    const coreInterest = answers.core_interest.split('(')[1].replace(')', '');

    // 5. Emotional State
    const emotionalState = answers.emotional_state.includes("Calmly") ? "Stable and Adaptable" : answers.emotional_state.includes("stressed") ? "Reactive to Disruption" : "Prone to Overwhelm";

    // 6. Task Behavior
    let taskBehavior = [];
    if (answers.task_behavior_planning.includes("Define all steps")) taskBehavior.push("Highly Organized Planner");
    if (answers.task_behavior_resilience.includes("Analyze it")) taskBehavior.push("Resilient and Action-Oriented");
    if (answers.task_behavior_group.includes("Leading")) taskBehavior.push("Natural Leader/Director");

    if (taskBehavior.length === 0) taskBehavior.push("Specialist, focusing on independent execution.");

    // 7. Strong & Weak Skills
    const strongSkill = answers.strong_skill.split('(')[1].replace(')', '');
    const weakSkill = answers.weak_skill.split('(')[0].trim();

    let growthAreas = [];
    if (weakSkill === "Staying motivated on long projects") growthAreas.push("Endurance & Long-Term Focus");
    if (weakSkill === "Understanding emotional or social situations") growthAreas.push("Emotional Intelligence & Soft Skills");
    if (weakSkill === "Keeping track of small details and follow-through") growthAreas.push("Attention to Detail & Task Completion");
    if (emotionalState.includes("Overwhelm") || emotionalState.includes("Reactive")) growthAreas.push("Stress Management & Emotional Regulation");
    if (answers.task_behavior_planning.includes("Wait until the last minute")) growthAreas.push("Proactivity & Time Management");
    if (answers.task_behavior_resilience.includes("Risk-Averse")) growthAreas.push("Risk Tolerance & Resilience");

    let recommendations = growthAreas.length > 0
        ? "We recommend modules focusing on: " + growthAreas.join(", ") + ". These will help round out your 'Genome'."
        : "Your profile is highly adaptable and robust! Focus on mastering advanced domain-specific knowledge within your core interest.";


    // 8. Assemble HTML Profile
    let profileHTML = `<h2 class="text-3xl font-bold text-green-400 mb-6 text-center">Your Skill Forge Profile (7-Point Analysis)</h2>`;
    profileHTML += `<p class="text-lg text-center text-gray-300 mb-8">This profile summarizes your strengths across seven key developmental areas.</p>`;

    // Core Analysis Grid
    profileHTML += `<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-8">
        ${renderMetric("Thinking Style", thinkingStyle, "üí°")}
        ${renderMetric("Perception (Learning)", perception, "üëÇ")}
        ${renderMetric("Core Interest", coreInterest, "‚≠ê")}
        ${renderMetric("Pace of Assimilation", pace, "‚è±Ô∏è")}
        ${renderMetric("Emotional State", emotionalState, "üòä")}
        ${renderMetric("Primary Strong Skill", strongSkill, "üí™")}
    </div>`;

    // Task Behavior Summary
    profileHTML += `<div class="bg-[#1e1e1e] p-5 rounded-xl border border-green-700/30 mb-6">
        <p class="font-semibold text-green-400 text-xl mb-2">Task Behavior & Leadership:</p>
        <p class="text-white">${taskBehavior.join('; ')}</p>
    </div>`;

    // Growth Areas
    profileHTML += `<h3 class="text-xl font-bold text-red-400 mt-6 mb-3">Identified Growth Areas:</h3>`;
    profileHTML += `<ul class="list-disc list-inside ml-4 space-y-2 text-gray-300">`;
    if (growthAreas.length === 0) {
         profileHTML += `<li>None detected! This is a strong, well-rounded profile.</li>`;
    } else {
        growthAreas.forEach(w => {
            profileHTML += `<li class="text-red-300">${w}</li>`;
        });
    }
    profileHTML += `</ul>`;

    // Recommendation
    profileHTML += `<p class="mt-8 text-lg font-semibold text-white">Skill Forge Personalized Recommendation:</p>`;
    profileHTML += `<p class="text-gray-400">${recommendations}</p>`;

    profileHTML += `<div class="text-center mt-10">
                        <button onclick="restartQuiz()" class="bg-green-600 text-gray-900 font-bold px-8 py-3 rounded-xl hover:bg-green-500 transition duration-200 shadow-lg transform hover:scale-105">
                            Restart Test
                        </button>
                    </div>`;

    res.innerHTML = profileHTML;
    res.style.display = "block";
}

function renderMetric(title, value, icon) {
    return `<div class="bg-[#1e1e1e] p-4 rounded-xl border border-green-700/30">
        <p class="text-2xl mb-1">${icon}</p>
        <p class="font-semibold text-green-400 text-sm uppercase">${title}:</p>
        <p class="text-white text-md font-bold">${value}</p>
    </div>`;
}

function restartQuiz() {
    answers = {};
    currentQuestion = 0;
    document.getElementById("result").style.display = "none";
    document.getElementById("quiz-container").style.display = "block";
    showQuestion();
}

// Initialize first question
showQuestion();
</script>

</body>
</html>